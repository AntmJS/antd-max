"use strict";(self.webpackChunkantd_max=self.webpackChunkantd_max||[]).push([[962],{7584:(e,o,r)=>{r.d(o,{Z:()=>l});var t=r(5893),n=r(7294),a=r(5372);function l(e){const{onClick:o,children:r,async:l,loadingText:s,...c}=e,[i,p]=(0,n.useState)(!1),m=(0,n.useCallback)((async e=>{i||(o&&l?(p(!0),await o(e),p(!1)):o&&o(e))}),[l,i,o]);return(0,t.jsx)(a.ZP,{...c,onClick:m,loading:i,children:i&&s||r})}},9962:(e,o,r)=>{r.r(o),r.d(o,{default:()=>m});var t=r(5893),n=r(7584),a=r(371),l=r(5746),s=r(8638),c=r(5933);function i(e){return(0,t.jsx)(c.Z,{...e})}c.Z.resiterComponent({type:"checkbox",component:a.Z.Group,transformProps:e=>({children:({options:e})=>(0,t.jsx)(t.Fragment,{children:e.map(((e,o)=>"object"==typeof e?(0,t.jsx)(l.Z,{span:8,children:(0,t.jsx)(a.Z,{value:e.value,children:e.label})},`${e.value}_${o}`):(0,t.jsx)(l.Z,{span:8,children:(0,t.jsx)(a.Z,{value:e,children:e})},`${e}_${o}`)))}),...e})}),c.Z.resiterComponent({type:"imageUploader",component:s.Z,trigger:"onChange",valuePropName:"fileList",getValueFromEvent:e=>Array.isArray(e)?e:e?.fileList,transformProps:e=>({action:"/upload.do",listType:"picture-card",children:(0,t.jsx)("div",{style:{marginTop:8},children:"上传"}),...e})}),i.resiterComponent=c.Z.resiterComponent,i.showComponents=c.Z.showComponents,i.useForm=c.Z.useForm;const p=i;function m(){const[e]=i.useForm();return(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{children:"表单模块1"}),(0,t.jsx)(p,{form:e,config:[{key:"images",label:"上传图片",type:"imageUploader"},{key:"checkbox",label:"选择品类",type:"checkbox",props:{options:["A","B","C","D"]}}]}),(0,t.jsx)("span",{children:"表单模块2"}),(0,t.jsx)(p,{form:e,config:[{col:24,key:"checkbox1",label:"选择品类",type:"checkbox",props:{options:["A","B","C","D"]}}]}),(0,t.jsx)(n.Z,{onClick:()=>{alert(JSON.stringify(e.getFieldsValue()))},children:"点击"})]})}},5933:(e,o,r)=>{r.d(o,{Z:()=>_});var t=r(5893),n=r(7294),a=r(7004),l=r(5746),s=r(1230);var c=r(7584);function i(e,o,r){for(const t in e){let n="",a={};for(let e=0;e<o.length;e++){const r=o[e];r?.key===t&&(n=r.type,a=r.props)}const l=r[n]?.transformDefaultValue,s=r?.[n]?.transformProps(a,{});l&&(e[t]=l(e[t],s))}return e}var p=r(7727),m=r(4041),f=r(8351),u=r(2637),d=r(8958),h=r(6178),y=r(3182),x=r(7484),C=r.n(x);const b=p.default.MonthPicker,k=p.default.RangePicker,Z=m.Z.Option,j={},g=(e,o)=>{if(e)return Array.isArray(e)?e.map((e=>e?C()(e,o.format):void 0)):C()(e,o.format)},v=(e,o)=>{if(e)return Array.isArray(e)?e.map((e=>e?e.format(o.format):void 0)):e?e.format(o.format):void 0},w=[{type:"timePicker",component:f.Z,transformDefaultValue:g,transformValue:v,transformProps:(e,o)=>({allowClear:!0,format:"HH:mm:ss",placeholder:`请选择${o.label||""}`,...e})},{type:"monthPicker",component:b,transformDefaultValue:g,transformValue:v,transformProps:e=>({allowClear:!0,format:"YYYY-MM",placeholder:"请选择",...e})},{type:"rangePicker",component:k,transformDefaultValue:g,transformValue:v,transformProps:e=>({allowClear:!0,format:"YYYY-MM-DD",placeholder:["开始时间","结束时间"],...e})},{type:"cascader",component:u.Z,transformProps:(e,o)=>({allowClear:!0,placeholder:`请选择${o.label||""}`,...e})},{type:"treeSelect",component:d.Z,transformProps:e=>({allowClear:!0,showSearch:!0,placeholder:"请选择",...e})},{type:"input",component:h.Z,transformProps:(e,o)=>({allowClear:!0,placeholder:`请输入${o.label||""}`,...e})},{type:"select",component:m.Z,transformProps:(e,o)=>({allowClear:!0,filterOption:e.showSearch?(e,o)=>{o?.props.children.props.title.toLowerCase().indexOf(e.toLowerCase())}:void 0,placeholder:`请输入${o.label||""}`,...e,children:(e.options||[]).map((e=>(0,t.jsx)(Z,{value:e.value,children:(0,t.jsx)(y.Z,{title:e.label,children:e.label})},`${e.value}_${e.label}`)))})}];function $(e){const{type:o}=e;j[o]&&console.warn(`FormBox: Overwrite existing component ${o}`),j[o]=e}w.forEach((e=>{$(e)}));const P="antm-ui",V=a.Z.Item;let F=0;function A(e){const{config:o,defaultValues:r,actions:p,queryInit:m,col:f,form:u,...d}=e,h=f,[y]=(0,n.useState)(F++);(0,n.useEffect)((()=>{if(m){const e=i(((e=window.location.href)=>{const o=e.split("?")[1],r={};if(o){const e=o.split("&");for(let o=0;o<e.length;o++){const n=e[o]?.split("=");r[n[0]]=n[1]?(t=n[1],"object"==typeof decodeURIComponent(t)?JSON.parse(t):t):void 0}}var t;return r})(),o,j);u.setFieldsValue(e)}}),[]);const x=(0,n.useCallback)(((e,o)=>{const{type:r,key:n,label:a,props:s,col:c,...i}=e,p=j[r],{component:m,transformProps:f,transformDefaultValue:u,transformValue:d,...x}=p,C=m,b=f?.(s||{},{label:a});return(0,t.jsx)(l.Z,{xl:c||h||8,lg:12,md:24,sm:24,xs:24,style:{marginBottom:"24px"},children:(0,t.jsx)(V,{label:a,name:n,...Object.assign(x,i),children:(0,t.jsx)(C,{...b})})},`${P}-form-col${o}_${y}_${Array.isArray(n)?n.join("_"):n}`)}),[y,h]),C=(0,n.useCallback)((()=>{const e=u.getFieldsValue();for(const r in e){let t="",n={};for(let e=0;e<o.length;e++){const a=o[e];a?.key===r&&(t=a.type,n=a.props)}const a=j[t]?.transformValue,l=j[t].transformProps(n,{});a&&(e[r]=a(e[r],l))}return e}),[o,u]),b=(0,n.useCallback)((e=>{const o=C();"reset"===e.actionType&&u.resetFields(),e.onClick?.(o)}),[u,C]),k=(0,n.useCallback)((()=>i(r||{},o,j)),[o,r]);return(0,t.jsxs)(a.Z,{initialValues:k||{},className:`${P}-form-max`,layout:"inline",form:u,...d,children:[(0,t.jsx)(s.Z,{style:{width:"100%"},children:o.map(((e,o)=>x(e,o)))}),(0,t.jsx)(s.Z,{style:{width:"100%"},children:(0,t.jsx)(l.Z,{span:24,className:`${P}-form-max-btns`,children:p?.map(((e,o)=>{const{actionType:r,...t}=e;return(0,n.createElement)(c.Z,{...t,className:`${P}-form-max-btn ${e.className||""}`,key:`${P}-btn_${y}_${o}`,onClick:()=>b(e)})}))})})]})}A.resiterComponent=$,A.showComponents=function(){return j},A.useForm=a.Z.useForm;const _=A}}]);